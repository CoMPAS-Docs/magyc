<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="MAGYC: MAgnetometer and GYroscope Calibration based on a factor graph approach">
  <meta name="keywords" content="MAGYC, magyc">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MAGYC: MAgnetometer and GYroscope Calibration</title>

 <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0W1EEFNVDQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-0W1EEFNVDQ');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/compas_favicon.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <a class="navbar-item" href="https://www.mbari.org/team/compas-lab-control-modeling-and-perception-of-autonomous-systems-laboratory/">
      <span class="icon">
          <i class="fas fa-home"></i>
      </span>
      </a>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          Related Links
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="https://github.com/CoMPASLab/magyclib">
            MAGYC Python Source
          </a>
          <a class="navbar-item" href="https://pypi.org/project/magyc/">
            MAGYC Python Pypi
          </a>
          <a class="navbar-item" href="https://compaslab.github.io/magyclib/">
            MAGYC Docs
          </a>
          <a class="navbar-item" href="https://drive.google.com/file/d/1c5Y1y3PU0pYVrRuZwQGtYYlmj3X2twRm/view?usp=drive_link">
            Sim Data
          </a>
        </div>
      </div>
    </div>

  </div>
</nav>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <a href="https://www.mbari.org/team/compas-lab-control-modeling-and-perception-of-autonomous-systems-laboratory/">
            <img src="./static/images/compas_logo.png" alt="Logo CoMPAS" style="max-width: 200px; margin-bottom: 50px;">
          </a>
          <a href="https://www.mbari.org/">
            <img src="./static/images/mbari_logo.png" alt="Logo MBARI" style="max-width: 400px; margin-bottom: 50px; margin-left: 100px;">
          </a>
          <h2 class="title is-2 publication-title">MAGYC: MAgnetometer and GYroscope Calibration</h2>
          <hr style="border: 2px solid #1b75bc;">
          <p class="title is-4 publication-title">Full Magnetometer and Gyroscope Bias Estimation using Angular Rates: Theory and Experimental Evaluation of a Factor Graph-Based Approach</p>
          <p class="title is-6 publication-title" style="font-style: italic;">IEEE Journal of Oceanic Engineering, 2024</p>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="https://www.mbari.org/person/sebastian-rodriguez/">Sebastián Rodríguez-Martínez</a> and </span>
            <span class="author-block">
              <a href="https://www.mbari.org/person/giancarlo-troni/">Giancarlo Troni</a></span>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block">Monterey Bay Aquarium Research Institute (MBARI)</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=10908715"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- <span class="link-block">
                <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=10908715"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span> -->
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/CoMPASLab/magyclib"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Code Docs Link. -->
              <span class="link-block">
                <a href="https://compaslab.github.io/magyclib/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-obp"></i>
                  </span>
                  <span>Code Docs</span>
                  </a>
              </span>
              <!-- Dataset Link. -->
              <span class="link-block">
                <a href="https://drive.google.com/file/d/1c5Y1y3PU0pYVrRuZwQGtYYlmj3X2twRm/view?usp=drive_link"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-open-data"></i>
                  </span>
                  <span>Data</span>
                  </a>
              <!-- Pypi Link. -->
              <span class="link-block">
                <a href="https://pypi.org/project/magyc/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="fab fa-python"></i>
                  </span>
                  <span>Pypi Package</span>
                  </a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <div class="content has-text-centered">
          <img src="./static/images/magyc_cover_figure.png" style="max-width: 600px;">
        </div>
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Overview</h2>
        <div class="content has-text-justified">
          <p>
            Micro-Electro-Mechanical Systems (MEMS) Attitude and Heading Reference Systems (AHRS) are commonly
            used for determining system attitude but are limited by sensor biases. This paper introduces
            MAgnetometer and GYroscope Calibration (MAGYC), a method that estimates hard- and soft-iron
            magnetometer biases and gyroscope bias using three-axis angular rate measurements.
          </p>
          <p>
            The MAGYC approach uses batch and online incremental factor graphs, reducing calibration constraints,
            removing the need for local magnetic field data, and enabling integration into Smoothing and Mapping
            frameworks.
          </p>
          <p>
            Field tests on an underwater vehicle reduced dead reckoning-based position error from 10% to 0.5% of
            the distance traveled.
          </p>
        </div>
      </div>
    </div>
    <!--/ Abstract. -->
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Overview Section -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">MAGYC: Magnetometer and Gyroscope Calibration</h2>
        <div class="content has-text-justified">
          <p>
            This paper introduces MAGYC, a factor graph-based method for magnetometer and gyroscope calibration, offering:
          </p>
          <ul>
            <li>Minimal angular movement requirements;</li>
            <li>No need for local magnetic field or attitude information;</li>
            <li>Comprehensive calibration of magnetometer and gyroscope;</li>
            <li>Seamless integration with factor graph frameworks like GTSAM.</li>
          </ul>
          <p>
            MAGYC performs complete calibration of a three-axis magnetometer (hard- and soft-iron) and gyroscope using magnetometer and angular rate measurements, independent of the instrument's attitude. It includes two approaches: batch (MAGYC-BFG) and online incremental (MAGYC-IFG) factor graph methods.
          </p>
        </div>
      </div>
    </div>
    <!--/ Overview Section -->
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Simulation Results. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Simulation Results</h2>
        <div class="content has-text-justified">
          <p>
            A Monte Carlo simulation generated 6,000 measurements from a MEMS AHRS during vehicle sinusoidal motions.
            Three datasets were evaluated: Wide Angular Movement (WAM) for an articulated vehicle, Mid Angular
            Movement (MAM) for a roll-and-pitch stable vehicle, and Low Angular Movement (LAM) for a surveying vehicle
            with limited motion.
          </p>
          <p>
            The table below compares the mean heading RMSE and magnetic field standard deviation for three batch and
            two real-time calibration methods across the datasets, based on 100 validation runs.
            The top two results in each column are <strong>bolded</strong>, with superscripts indicating
            the failure rate in some simulations.
          </p>
        </div>
        <div class="content has-text-justified">
          <img src="./static/images/magyc_simulation_results.png">
        </div>
      </div>
    </div>
    <!--/ Simulation Results. -->
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Field Results. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Field Results</h2>
        <div class="content has-text-justified">
          <img src="./static/images/magyc_vehicles.png">
        </div>
        <div class="content has-text-justified">
          <p>
            The in-field performance of the proposed and benchmark methods was evaluated during two seafloor mapping
            surveys in Monterey Bay (2014 and 2024). Each deployment included two experiments.
            The first, EXP1-14 and EXP1-24, involved 360-degree heading rotations with the platform fixed at 0 degrees pitch,
            while pitch and roll oscillated slightly due to vehicle dynamics.
            The second, EXP2-14 and EXP2-24, consisted of "mowing the lawn" surveys: a static platform in EXP2-14 and
            an active seafloor-following vehicle in EXP2-24.
          </p>
          <p>
            The figure below shows field results: (a) heading errors for parameters from EXP1-14 (solid) and EXP1-24 (hatched)
            applied to EXP2-14 and EXP2-24, with red dashed lines marking failures.
            (b) Norm of XY position errors for EXP2-14, with total and relative errors summarized in the table.
          </p>
        </div>
        <div class="content has-text-justified">
          <img src="./static/images/magyc_field_results.png">
        </div>
      </div>
    </div>
    <!--/ Field Results. -->
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Conclusions -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Conclusions</h2>
        <div class="content has-text-justified">
          <p>
            The MAGYC methods demonstrated superior performance in simulations and field tests, excelling under ideal
            and constrained conditions. Field evaluations highlighted significant improvements in position accuracy
            and heading error reduction, confirming their practicality for underwater navigation in challenging environments.
          </p>
          <p>
            These results establish MAGYC as a reliable solution for magnetometer and gyroscope calibration,
            supporting low-cost navigation system development and improving the performance of marine, aerial,
            and ground vehicles in real-world applications.
          </p>
        </div>
      </div>
    </div>
    <!--/ Conclusions -->
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Python Library -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Python Library</h2>
        <!-- Code Link -->
        <span class="link-block">
          <a href="https://github.com/CoMPASLab/magyclib"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
                <i class="fab fa-github"></i>
            </span>
            <span>Code</span>
          </a>
        </span>
        <!-- Code Docs Link -->
        <span class="link-block">
          <a href="https://compaslab.github.io/magyclib/"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
                <i class="ai ai-obp"></i>
            </span>
            <span>Documentation</span>
          </a>
        </span>
        <!-- PyPI Link -->
        <span class="link-block">
          <a href="https://pypi.org/project/magyc/"
             class="external-link button is-normal is-rounded is-dark">
            <span class="icon">
              <i class="fab fa-python"></i>
            </span>
            <span>PyPI Package</span>
          </a>
        </span>
        <div class="content has-text-justified">
          <p>
            The MAGYC method is available as the Python library <a href="https://pypi.org/project/magyc/">magyc</a>, 
            which can be installed with <code>pip install magyc</code>. Developers can clone the 
            <a href="https://github.com/CoMPASLab/magyclib">magyclib repository</a> and use 
            <a href="https://python-poetry.org/">poetry</a> to manage dependencies and build the library with 
            <code>poetry build</code>. See the <a href="https://compaslab.github.io/magyclib/">documentation</a> 
            for more details.
          </p>
          <h3 class="title is-4" style="color: #1b75bc;font-weight: bolder;">Example Code</h3>
          <p>
            Calibration and evaluation examples are provided as Jupyter notebooks in the 
            <a href="https://github.com/CoMPASLab/magyclib/examples">magyclib repository</a>. Further details are 
            available in the <a href="https://compaslab.github.io/magyclib/example/">documentation</a>.
          </p>
        </div>
      </div>
    </div>
    <!--/ Python Library -->
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Acknowledgments -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3" style="color: #1b75bc;font-weight: bolder;">Acknowledgments</h2>
        <div class="content has-text-justified">
          <p>
            This work was supported by the David and Lucile Packard Foundation and FONDECYT-Chile under grant
            11180907. The field experimental data used in this study were collected in oceanographic surveys
            conducted by the Monterey Bay Aquarium Research Institute, led by Chief Scientist Dr. David Caress.
          </p>
        </div>
      </div>
    </div>
    <!--/ Acknowledgments -->
  </div>
</section>

<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@ARTICLE{10908715,
      author={Rodríguez-Martínez, Sebastián and Troni, Giancarlo},
      journal={IEEE Journal of Oceanic Engineering},
      title={Full Magnetometer and Gyroscope Bias Estimation Using Angular Rates: Theory and Experimental Evaluation of a Factor Graph-Based Approach}, 
      year={2025},
      volume={},
      number={},
      pages={1-10},
      keywords={Magnetometers;Calibration;Gyroscopes;Magnetic tunneling;Mathematical models;Magnetic domains;Estimation;Accelerometers;Noise measurement;Earth;Doppler navigation;gyroscope bias calibration;magnetometer hard-iron bias and soft-iron bias calibration;marine robotics;sensor fusion},
      doi={10.1109/JOE.2024.3523701}}
    </code></pre>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content has-text-centered">
          <p>
            This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
          <p>
            2024 - CoMPAS Lab - Monterey Bay Aquarium Research Institute (MBARI)
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

</body>
</html>
